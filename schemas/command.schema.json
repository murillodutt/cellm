{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://cellm.dev/schemas/command.schema.json",
  "title": "CELLM Command Schema",
  "description": "Schema para validação de arquivos de command (cellm-core/commands/)",
  "type": "object",
  "required": ["command", "agent"],
  "properties": {
    "command": {
      "type": "string",
      "pattern": "^[a-z]+(-[a-z]+)*$",
      "description": "Nome do comando em kebab-case (ex: implement, plan-product, reuse-check)"
    },
    "version": {
      "type": "string",
      "pattern": "^v[0-9]+\\.[0-9]+\\.[0-9]+$",
      "description": "Versão semântica (ex: v1.0.0)",
      "default": "v0.10.0"
    },
    "status": {
      "type": "string",
      "enum": ["OK", "DRAFT", "REVISAR", "OBSOLETO"],
      "description": "Status do command",
      "default": "OK"
    },
    "budget": {
      "type": "string",
      "pattern": "^~[0-9]+( tokens)?$",
      "description": "Estimativa de tokens (ex: ~150 tokens)"
    },
    "agent": {
      "type": "string",
      "enum": ["architect", "implementer", "reviewer", "project-manager"],
      "description": "Agent responsável por executar o command"
    },
    "workflow": {
      "type": "string",
      "pattern": "^[a-z]+(-[a-z]+)*$",
      "description": "Workflow associado ao command (se houver)"
    },
    "aliases": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^[a-z]+(-[a-z]+)*$"
      },
      "description": "Aliases alternativos para o command"
    },
    "description": {
      "type": "string",
      "description": "Descrição breve do propósito do command"
    }
  },
  "examples": [
    {
      "command": "implement",
      "agent": "implementer"
    },
    {
      "command": "status",
      "agent": "project-manager"
    },
    {
      "command": "plan-product",
      "agent": "architect",
      "workflow": "plan-product"
    },
    {
      "command": "reuse-check",
      "agent": "architect",
      "description": "Busca componentes reutilizáveis antes de criar novos"
    }
  ]
}
