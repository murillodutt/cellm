{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://cellm.dev/schemas/base.schema.json",
  "title": "CELLM Base Schema",
  "description": "Definições comuns reutilizadas por outros schemas CELLM",
  "$defs": {
    "identifier": {
      "type": "string",
      "pattern": "^[A-Z][A-Z0-9-]*[0-9]{3}$|^[A-Z]+-INDEX$",
      "description": "Identificador único (ex: CONV-001, TS-INDEX, ANTI-001)"
    },
    "version": {
      "type": "string",
      "pattern": "^v[0-9]+\\.[0-9]+\\.[0-9]+$",
      "description": "Versão semântica (ex: v1.0.0)"
    },
    "status": {
      "type": "string",
      "enum": ["OK", "DRAFT", "REVISAR", "OBSOLETO"],
      "description": "Status do artefato"
    },
    "budget": {
      "type": "string",
      "pattern": "^~[0-9]+( tokens)?$",
      "description": "Estimativa de budget em tokens (ex: ~150 tokens)"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 1
      },
      "uniqueItems": true,
      "description": "Tags para categorização"
    },
    "paths": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9_*/-]+$"
      },
      "minItems": 1,
      "description": "Padrões glob de path (ex: app/**/*.vue)"
    },
    "triggers": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "description": "Triggers que ativam o artefato (commands ou paths)"
    },
    "agentName": {
      "type": "string",
      "enum": ["architect", "implementer", "reviewer", "project-manager"],
      "description": "Nome de um agent válido"
    },
    "commandName": {
      "type": "string",
      "pattern": "^[a-z]+(-[a-z]+)*$",
      "description": "Nome de comando em kebab-case (ex: plan-product)"
    },
    "severity": {
      "type": "string",
      "enum": ["critical", "warning", "info"],
      "description": "Severidade do pattern"
    },
    "phase": {
      "type": "string",
      "enum": ["planning", "specification", "implementation", "verification"],
      "description": "Fase do workflow"
    }
  }
}
